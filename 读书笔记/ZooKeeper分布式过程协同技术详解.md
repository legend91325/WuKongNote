Znode 
~~~
/master
/workers 其下每个节点保存系统中一个可用从节点的信息
/tasks  其下每个节点保存所有已经创建并等待从节点执行的任务信息
/assign  其下每个节点保存了分配到某个从节点的一个任务信息，当主节点每分配一个任务就增加一个子节点

持久节点(peisistent)
临时节点(ephemeral)
有序节点(sequential)：
    持久
    临时
~~~
版本机制 保证 setData delete 操作传入版本号为参数，避免操作不一致效果。

ZooKeeper 架构
~~~
独立模式（standalone）
仲裁模式（quorum）
仲裁模式下 复制集群中的所有服务器的数据树（所需立法者的最小数量，选定法定人数准确的大小是非常重要的）
~~~
会话
~~~
一个客户端只打开一个会话，保证请求FIFO顺序执行。
如果发生网络分区，导致ZooKeeper与客户端隔离，直到显式关闭这个会话（客户端）或者分区问题修复后，
ZooKeeper发送的会话超时。 因为ZooKeeper对声明会话超时负责。

会话超时参数很重要：
假设超时时间为T, 客户端会在T/3的时间未收到任何消息，将向服务器发送心跳消息。
经过2T/3时间后 客户端会开始寻找其他服务器（还剩T/3时间寻找）

ZooKeeper实现中，系统根据每一个更新建立的顺序来分配给事务标识符（zkid），
ZooKeeper确保每一个变化相对于所有其他已执行的更新是完全有序的。
如果一个客户端在位置i观察到一个更新，它就不能连接到只观察到i`<i的服务器上。
~~~